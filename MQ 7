#define MQ7_ANALOG_PIN A0  // Analog output pin
#define MQ7_DIGITAL_PIN 2  // Digital output pin
#define HEATER_PIN 9       // Pin to control heating cycle

void setup() {
    Serial.begin(9600);  // Initialize serial communication
    pinMode(MQ7_DIGITAL_PIN, INPUT); // Set digital pin as input
    pinMode(HEATER_PIN, OUTPUT);
}

void loop() {
    // Heating cycle: High voltage (5V) for 60 sec
    digitalWrite(HEATER_PIN, HIGH);
    delay(60000); // 60 seconds

    // Read sensor values
    int gasValue = analogRead(MQ7_ANALOG_PIN);
    int gasDetected = digitalRead(MQ7_DIGITAL_PIN);

    Serial.print("Analog Value: ");
    Serial.print(gasValue);

    if (gasDetected == LOW) {
        Serial.println(" - High CO Levels Detected!");
    } else {
        Serial.println(" - CO Levels Normal.");
    }

    // Low voltage (1.4V) for 90 sec - use PWM to reduce voltage
    analogWrite(HEATER_PIN, 74);  // Approx. 1.4V (74/255 * 5V)
    delay(90000); // 90 seconds
}
